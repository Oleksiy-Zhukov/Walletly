{% extends 'base.html' %}
{% load static %}

{% block title %}Walletly Dashboard{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
{% endblock %}

{% block content %}
<div class="dashboard-container">
  <!-- Header Section -->
  <div class="dashboard-header">
    <h1>Welcome to Walletly</h1>
    <p>Here's your financial overview for today</p>
  </div>

  <!-- Metrics Cards Grid -->
  <div class="metrics-grid">
    <!-- Current Balance Card -->
    <div class="metric-card">
      <div class="metric-header">
        <div class="metric-icon balance-icon">
          <img src="https://cdn.jsdelivr.net/gh/tabler/tabler-icons/icons/currency-dollar.svg" alt="Balance" />
        </div>
        <div class="metric-trend positive">
          <span class="trend-arrow">↗</span>
          <span class="trend-value">+2.5%</span>
        </div>
      </div>
      <div class="metric-value">${{ total_balance|floatformat:0 }}</div>
      <div class="metric-label">Current Balance</div>
      <div class="metric-change positive">Available now</div>
    </div>

    <!-- Monthly Income Card -->
    <div class="metric-card">
      <div class="metric-header">
        <div class="metric-icon income-icon">
          <img src="https://cdn.jsdelivr.net/gh/tabler/tabler-icons/icons/chart-pie.svg" alt="Income" />
        </div>
        <div class="metric-trend positive">
          <span class="trend-arrow">↗</span>
          <span class="trend-value">+12.3%</span>
        </div>
      </div>
      <div class="metric-value">${{ monthly_income|floatformat:0 }}</div>
      <div class="metric-label">Monthly Income</div>
      <div class="metric-change positive">This month</div>
    </div>

    <!-- Monthly Expenses Card -->
    <div class="metric-card">
      <div class="metric-header">
        <div class="metric-icon expense-icon">
          <img src="https://cdn.jsdelivr.net/gh/tabler/tabler-icons/icons/arrow-up-right.svg" alt="Expenses" />
        </div>
        <div class="metric-trend negative">
          <span class="trend-arrow">↘</span>
          <span class="trend-value">-5.2%</span>
        </div>
      </div>
      <div class="metric-value">${{ monthly_expenses|floatformat:0 }}</div>
      <div class="metric-label">Monthly Expenses</div>
      <div class="metric-change negative">This month</div>
    </div>

    <!-- Net Income Card -->
    <div class="metric-card">
      <div class="metric-header">
        <div class="metric-icon net-icon">
          <img src="https://cdn.jsdelivr.net/gh/tabler/tabler-icons/icons/arrow-down-left.svg" alt="Net Income" />
        </div>
        <div class="metric-trend {% if net_income >= 0 %}positive{% else %}negative{% endif %}">
          <span class="trend-arrow">{% if net_income >= 0 %}↗{% else %}↘{% endif %}</span>
          <span class="trend-value">{% if net_income >= 0 %}+8.7%{% else %}-3.4%{% endif %}</span>
        </div>
      </div>
      <div class="metric-value">${{ net_income|floatformat:0 }}</div>
      <div class="metric-label">Net Income</div>
      <div class="metric-change {% if net_income >= 0 %}positive{% else %}negative{% endif %}">
        {% if net_income >= 0 %}Positive{% else %}Negative{% endif %}
      </div>
    </div>
  </div>

  <!-- Charts Section -->
  <div class="charts-grid">
    <!-- Transaction Chart -->
    <div class="chart-card">
      <div class="chart-header">
        <h3 class="chart-title">Balance Trend</h3>
        <div class="chart-controls">
          <button class="chart-btn active" data-period="6m">6M</button>
          <button class="chart-btn" data-period="1y">1Y</button>
          <button class="chart-btn" data-period="all">All</button>
        </div>
      </div>
      <div class="chart-container">
        <canvas id="transactionChart"></canvas>
      </div>
    </div>

    <!-- Category Chart -->
    <div class="chart-card">
      <div class="chart-header">
        <h3 class="chart-title">Spending by Category</h3>
        <div class="chart-controls">
          <button class="chart-btn active" data-period="month">Month</button>
          <button class="chart-btn" data-period="year">Year</button>
        </div>
      </div>
      <div class="chart-container">
        <canvas id="categoryChart"></canvas>
      </div>
    </div>
  </div>

  <!-- Recent Activity Section -->
  <div class="activity-section">
    <div class="activity-card">
      <div class="activity-header">
        <h3 class="activity-title">Recent Transactions</h3>
        <a href="#" class="activity-link">View All</a>
      </div>
      <div class="activity-list">
        <div class="activity-item">
          <div class="activity-icon expense">
            <img src="https://cdn.jsdelivr.net/gh/tabler/tabler-icons/icons/shopping-cart.svg" alt="Shopping" />
          </div>
          <div class="activity-info">
            <div class="activity-name">Grocery Shopping</div>
            <div class="activity-date">Today, 2:30 PM</div>
          </div>
          <div class="activity-amount expense">-$85.50</div>
        </div>
        
        <div class="activity-item">
          <div class="activity-icon income">
            <img src="https://cdn.jsdelivr.net/gh/tabler/tabler-icons/icons/briefcase.svg" alt="Salary" />
          </div>
          <div class="activity-info">
            <div class="activity-name">Salary Deposit</div>
            <div class="activity-date">Yesterday, 9:00 AM</div>
          </div>
          <div class="activity-amount income">+$3,200.00</div>
        </div>
        
        <div class="activity-item">
          <div class="activity-icon expense">
            <img src="https://cdn.jsdelivr.net/gh/tabler/tabler-icons/icons/car.svg" alt="Transport" />
          </div>
          <div class="activity-info">
            <div class="activity-name">Gas Station</div>
            <div class="activity-date">Yesterday, 6:45 PM</div>
          </div>
          <div class="activity-amount expense">-$45.20</div>
        </div>
        
        <div class="activity-item">
          <div class="activity-icon expense">
            <img src="https://cdn.jsdelivr.net/gh/tabler/tabler-icons/icons/device-mobile.svg" alt="Bills" />
          </div>
          <div class="activity-info">
            <div class="activity-name">Phone Bill</div>
            <div class="activity-date">2 days ago</div>
          </div>
          <div class="activity-amount expense">-$89.99</div>
        </div>
        
        <div class="activity-item">
          <div class="activity-icon income">
            <img src="https://cdn.jsdelivr.net/gh/tabler/tabler-icons/icons/gift.svg" alt="Bonus" />
          </div>
          <div class="activity-info">
            <div class="activity-name">Cashback Reward</div>
            <div class="activity-date">3 days ago</div>
          </div>
          <div class="activity-amount income">+$12.50</div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/dashboard.js' %}"></script>
{% endblock %}